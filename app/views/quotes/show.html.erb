<% content_for :title, "Quote Details" %>


<div class="card">
  <div class="card-header">
    <h2 class="mb-0"><%= truncate(@quote.quote_text, length: 100) %></h2>
  </div>
  <div class="card-body">
    <% if @quote.comment.present? %>
      <p class="card-text"><strong>Comment:</strong> <%= @quote.comment %></p>
    <% end %>
    <p>
      <strong>Published Year:</strong>
      <%= @quote.published_year.presence || "Unknown" %>
    </p>
    <p>
      <strong>Categories:</strong>
      <% if @quote.categories.any? %>
        <% @quote.categories.each do |category| %>
          <span class="badge bg-secondary me-1"><%= category.category_name %></span>
        <% end %>
      <% else %>
        <span class="text-danger">Uncategorized</span>
      <% end %>
    </p>
    <p>
      <strong>Philosopher:</strong>
      <% if @quote.philosopher.present? %>
        <%= @quote.philosopher.fname.presence || "" %>
        <%= @quote.philosopher.lname.presence || "" %>
        <% years = [@quote.philosopher.birth_year, @quote.philosopher.death_year].compact.join(" - ") %>
        <% if years.present? %>
          (<%= years %>)
        <% end %>
        <% if @quote.philosopher.short_bio.present? %>
          <br>
          <small><%= @quote.philosopher.short_bio %></small>
        <% end %>
      <% else %>
        Anonymous
      <% end %>
    </p>
    <p>
      <strong>Submitted by:</strong> <%= @quote.user.fname %>
      <% if @quote.is_public %>
        <span class="badge bg-success ms-2">Public</span>
      <% else %>
        <span class="badge bg-warning text-dark ms-2">Private</span>
      <% end %>
    </p>
  </div>

  <div class="card-footer d-flex justify-content-between">
   
    <%= link_to "Back to quotes", (is_administrator? ? root_path : (@quote.user == current_user ? your_quotes_path : root_path)),class: "btn btn-outline-secondary btn-sm" %>
    <% if @quote.user == current_user || is_administrator? %>
      <%= link_to "Edit this quote", edit_quote_path(@quote), class: "btn btn-outline-primary btn-sm" %>
      <%= button_to "Delete this quote", @quote, method: :delete, class: "btn btn-danger btn-sm ms-2", data: { confirm: "Are you sure you want to delete this quote?" } %>
    <% end %>
  </div>
</div>
