<% content_for :title, "Quote Details" %>

<% if notice %>
  <div class="alert alert-success mb-3"><%= notice %></div>
<% end %>

<div class="card">
  <div class="card-header">
    <h2 class="mb-0"><%= truncate(@quote.quote_text, length: 100) %></h2>
  </div>
  <div class="card-body">
    <% if @quote.comment.present? %>
      <p class="card-text"><strong>Comment:</strong> <%= @quote.comment %></p>
    <% end %>
    <p>
      <strong>Published Year:</strong> <%= @quote.published_year %>
    </p>
    <p>
      <strong>Categories:</strong>
      <% @quote.categories.each do |category| %>
        <span class="badge bg-secondary me-1"><%= category.category_name %></span>
      <% end %>
    </p>
    <% if @quote.philosopher %>
      <p>
        <strong>Philosopher:</strong> <%= @quote.philosopher.lname %>
      </p>
    <% end %>
    <p>
      <strong>Submitted by:</strong> <%= @quote.user.fname %> <%= @quote.user.lname %>
      <% if @quote.is_public %>
        <span class="badge bg-success ms-2">Public</span>
      <% else %>
        <span class="badge bg-warning text-dark ms-2">Private</span>
      <% end %>
    </p>
  </div>

  <div class="card-footer d-flex justify-content-between">
    <%= link_to "Back to quotes", root_path, class: "btn btn-outline-secondary btn-sm" %>
    <% if @user == current_user %>
      <%= link_to "Edit this quote", edit_quote_path(@quote), class: "btn btn-outline-primary btn-sm" %>
      <%= button_to "Delete this quote", @quote, method: :delete, class: "btn btn-danger btn-sm ms-2", data: { confirm: "Are you sure you want to delete this quote?" } %>
    <% end %>
  </div>
</div>
